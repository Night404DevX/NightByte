<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Home | Schoology</title>
<link rel="icon" type="image/x-icon" href="https://www.powerschool.com/favicon.ico" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="/css/silent.css">
  <script src="/js/randomSentence.js"></script>
    <script src="/js/admin.js"></script>
  <style>
body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  font-family: inherit;
  overflow: hidden;
}

.iframe-wrapper {
  position: relative;
  display: inline-block;
  transition: all 0.3s ease;
}

.iframe-container {
  width: 90vw;
  max-width: 1400px;
  height: 80vh;
  max-height: 900px;
  border-radius: var(--radius);
  overflow: hidden;
  background: rgba(255, 255, 255, 0.03);
  backdrop-filter: blur(var(--glass-blur));
  border: 1px solid var(--glass-border);
  box-shadow: var(--shadow);
  transition: all 0.3s ease;
}

iframe {
  width: 100%;
  height: 100%;
  border: none;
  border-radius: var(--radius);
}

.controls {
  position: absolute;
  bottom: -50px;
  right: 0;
  display: flex;
  gap: 12px;
  z-index: 2;
}

.control-btn {
  width: 36px;
  height: 36px;
  border: none;
  border-radius: 50%;
  background: rgba(255,255,255,0.06);
  color: var(--accent-1);
  font-size: 16px;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  transition: transform 0.25s ease, box-shadow 0.25s ease, color 0.25s ease;
  backdrop-filter: blur(12px);
  box-shadow: 0 0 6px var(--accent-1);
}

.control-btn:hover {
  transform: scale(1.2);
  color: var(--accent-2);
}

.iframe-wrapper.fullscreen {
  width: 100vw !important;
  height: 100vh !important;
  max-width: 100vw !important;
  max-height: 100vh !important;
  border-radius: 0 !important;
}

.iframe-wrapper.fullscreen .iframe-container {
  width: 100%;
  height: 100%;
  max-width: 100%;
  max-height: 100%;
  border-radius: 0;
}
</style>
</head>
<body>
  <canvas id="particles"></canvas>
  <header>
    <nav>
      <div class="logo"><div class="mark">SG</div>Silent Games</div>
      <div class="nav-links">
        <a href="/"><i class="fa-solid fa-house"></i> Home</a>
        <a href="/pages/lausd.html"><i class="fa-solid fa-gamepad"></i> Games</a>
        <a href="/pages/c.html"><i class="fa-solid fa-circle-user"></i> Credits</a>
        <a href="/pages/u.html"><i class="fa-solid fa-list"></i> Updates</a>
        <a href=""><i class="fa-solid fa-envelope"></i> Contact</a>
      <div class="dropdown">
        <a href="#" class="dropbtn"><i class="fa-solid fa-ellipsis-vertical"></i> More</a>
       <div class="dropdown-content">
          <a href="/pages/chat.html"><i class="fa-solid fa-message"></i> Chat</a>
    </div>
  </div>
        <button id="theme-toggle" class="theme-toggle"><i class="fa-solid fa-palette"></i></button>
        <div id="theme-menu" class="theme-menu">
        <div class="theme-option" data-color="#64d2ff" data-bg="#05060a"><div class="color-circle" style="background:#64d2ff;"></div>Blue</div>
      <div class="theme-option" data-color="#ff66cc" data-bg="#1a001a"><div class="color-circle" style="background:#ff66cc;"></div>Pink</div>
      <div class="theme-option" data-color="#00ffaa" data-bg="#001a10"><div class="color-circle" style="background:#00ffaa;"></div>Green</div>
      <div class="theme-option" data-color="#ffa500" data-bg="#1a0f00"><div class="color-circle" style="background:#ffa500;"></div>Orange</div>
      <div class="theme-option" data-color="#a78bfa" data-bg="#0f001a"><div class="color-circle" style="background:#a78bfa;"></div>Purple</div>
      <div class="theme-option" data-color="#ff0000" data-bg="#1a0000"><div class="color-circle" style="background:#ff0000;"></div>Red</div>
      <div class="theme-option" data-color="#00ccff" data-bg="#00111a"><div class="color-circle" style="background:#00ccff;"></div>Cyan</div>
      <div class="theme-option" data-color="#00ffcc" data-bg="#00201a"><div class="color-circle" style="background:#00ffcc;"></div>Teal</div>
      <div class="theme-option" data-color="#ffff00" data-bg="#1a1a00"><div class="color-circle" style="background:#ffff00;"></div>Yellow</div>
      <div class="theme-option" data-color="#ff00ff" data-bg="#1a001a"><div class="color-circle" style="background:#ff00ff;"></div>Magenta</div>
      <div class="theme-option" data-color="#00ff00" data-bg="#001a00"><div class="color-circle" style="background:#00ff00;"></div>Lime</div>
      <div class="theme-option" data-color="#FFA500" data-bg="#000000"><div class="color-circle" style="background:#FFA500;"></div>CornHub</div>
      <div class="theme-option" data-color="#ff7f50" data-bg="#1a0a05"><div class="color-circle" style="background:#ff7f50;"></div>Coral</div>
      <div class="theme-option" data-color="#8a2be2" data-bg="#0f0015"><div class="color-circle" style="background:#8a2be2;"></div>BlueViolet</div>
      <div class="theme-option" data-color="#1e90ff" data-bg="#00111a"><div class="color-circle" style="background:#1e90ff;"></div>DodgerBlue</div>
      <div class="theme-option" data-color="#ff1493" data-bg="#1a0010"><div class="color-circle" style="background:#ff1493;"></div>DeepPink</div>
      <div class="theme-option" data-color="#7fff00" data-bg="#001a05"><div class="color-circle" style="background:#7fff00;"></div>Chartreuse</div>
      <div class="theme-option" data-color="#00fa9a" data-bg="#001a0a"><div class="color-circle" style="background:#00fa9a;"></div>SpringGreen</div>
      <div class="theme-option" data-color="#ff4500" data-bg="#1a0500"><div class="color-circle" style="background:#ff4500;"></div>OrangeRed</div>
      <div class="theme-option" data-color="#adff2f" data-bg="#101a00"><div class="color-circle" style="background:#adff2f;"></div>GreenYellow</div>
      <div class="theme-option" data-color="#00bfff" data-bg="#00121a"><div class="color-circle" style="background:#00bfff;"></div>DeepSkyBlue</div>
      <div class="theme-option" data-color="#ff69b4" data-bg="#1a0010"><div class="color-circle" style="background:#ff69b4;"></div>HotPink</div>
      <div class="theme-option" data-color="#7b68ee" data-bg="#0f0015"><div class="color-circle" style="background:#7b68ee;"></div>MediumSlateBlue</div>
      <div class="theme-option" data-color="#32cd32" data-bg="#001a05"><div class="color-circle" style="background:#32cd32;"></div>LimeGreen</div>
      <div class="theme-option" data-color="#ff8c00" data-bg="#1a0500"><div class="color-circle" style="background:#ff8c00;"></div>DarkOrange</div>
      <div class="theme-option" data-color="#ff6347" data-bg="#1a0500"><div class="color-circle" style="background:#ff6347;"></div>Tomato</div>
      <div class="theme-option" data-color="#40e0d0" data-bg="#00121a"><div class="color-circle" style="background:#40e0d0;"></div>Turquoise</div>
      <div class="theme-option" data-color="#ffb6c1" data-bg="#1a0010"><div class="color-circle" style="background:#ffb6c1;"></div>LightPink</div>
      <div class="theme-option" data-color="#9370db" data-bg="#0f0015"><div class="color-circle" style="background:#9370db;"></div>MediumPurple</div>
      <div class="theme-option" data-color="#3cb371" data-bg="#001a05"><div class="color-circle" style="background:#3cb371;"></div>MediumSeaGreen</div>
      <div class="theme-option" data-color="#8b0000" data-bg="#1a0000"><div class="color-circle" style="background:#8b0000;"></div>DarkRed</div>
      <div class="theme-option" data-color="#006400" data-bg="#001400"><div class="color-circle" style="background:#006400;"></div>DarkGreen</div>
      <div class="theme-option" data-color="#00008b" data-bg="#00000f"><div class="color-circle" style="background:#00008b;"></div>DarkBlue</div>
      <div class="theme-option" data-color="#4b0082" data-bg="#0f0010"><div class="color-circle" style="background:#4b0082;"></div>Indigo</div>
      <div class="theme-option" data-color="#1ca9c9" data-bg="#00111a"><div class="color-circle" style="background:#1ca9c9;"></div>BrightBlue</div>
      <div class="theme-option" data-color="#daa520" data-bg="#1a1200"><div class="color-circle" style="background:#daa520;"></div>Goldenrod</div>
      <div class="theme-option" data-color="#7fffd4" data-bg="#00121a"><div class="color-circle" style="background:#7fffd4;"></div>Aquamarine</div>
      <div class="theme-option" data-color="#f0e68c" data-bg="#1a1a0a"><div class="color-circle" style="background:#f0e68c;"></div>Khaki</div>
      <div class="theme-option" data-color="#ffdab9" data-bg="#1a0f05"><div class="color-circle" style="background:#ffdab9;"></div>PeachPuff</div>
      <div class="theme-option" data-color="#ba55d3" data-bg="#0f0015"><div class="color-circle" style="background:#ba55d3;"></div>MediumOrchid</div>
      <div class="theme-option" data-color="#7cfc00" data-bg="#001a00"><div class="color-circle" style="background:#7cfc00;"></div>LawnGreen</div>
      <div class="theme-option" data-color="#dc143c" data-bg="#1a000a"><div class="color-circle" style="background:#dc143c;"></div>Crimson</div>
      <div class="theme-option" data-color="#4682b4" data-bg="#00111a"><div class="color-circle" style="background:#4682b4;"></div>SteelBlue</div>
      <div class="theme-option" data-color="#dda0dd" data-bg="#0f0015"><div class="color-circle" style="background:#dda0dd;"></div>Plum</div>
      <div class="theme-option" data-color="#ffd700" data-bg="#1a1500"><div class="color-circle" style="background:#ffd700;"></div>Gold</div>
      <div class="theme-option" data-color="#00ffff" data-bg="#00111a"><div class="color-circle" style="background:#00ffff;"></div>Aqua</div>
        </div>
      </div>
    </div>
  </nav>
  </header>
  <main>

<div class="iframe-wrapper" id="iframeWrapper">
  <div class="iframe-container" id="iframeContainer">
    <iframe id="myIframe"></iframe>
  </div>

  <div class="controls">
    <button class="control-btn" id="fullscreenBtn" title="Fullscreen">
      <i class="fas fa-expand"></i>
    </button>
    <button class="control-btn" id="refreshBtn" title="Refresh">
      <i class="fas fa-sync-alt"></i>
    </button>
    <button class="control-btn" id="openBtn" title="Open in new tab">
      <i class="fas fa-external-link-alt"></i>
    </button>
  </div>
</div>
  </main>
  
  <footer>
    <p>© Silent Games • Built with care • <span id="contact">refinesilent@gmail.com</span></p>
  </footer>

  
  <script src="/js/silent.js"></script>
  
  <script>
    document.addEventListener("DOMContentLoaded", () => {
  const timeline = document.querySelector(".timeline");
  const items = document.querySelectorAll(".timeline-item");

  // Observer for timeline line
  const timelineObserver = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) timeline.classList.add("visible");
    });
  }, { threshold: 0.3 });

  if (timeline) timelineObserver.observe(timeline);

  // Observer for individual items
  const itemObserver = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add("visible");
      }
    });
  }, { threshold: 0.2 });

  items.forEach(item => itemObserver.observe(item));
});
  </script>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
import { getFirestore, collection, getDocs, query, orderBy, limit } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore.js";

// --- Firebase config ---
const firebaseConfig = {
  apiKey: "AIzaSyDqT79o5AxFMTUmfiyelG-mPX7axmu1TE4",
  authDomain: "silentgames-f9785.firebaseapp.com",
  databaseURL: "https://silentgames-f9785-default-rtdb.firebaseio.com",
  projectId: "silentgames-f9785",
  storageBucket: "silentgames-f9785.firebasestorage.app",
  messagingSenderId: "114016702963",
  appId: "1:114016702963:web:6d6e53e966e8b4de670286",
  measurementId: "G-ECS8Z3WEZ3"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// Fetch latest announcement
async function loadAnnouncement() {
  const q = query(collection(db, "announcements"), orderBy("timestamp", "desc"), limit(1));
  const snapshot = await getDocs(q);

  if (!snapshot.empty) {
    const latestDoc = snapshot.docs[0];
    const latest = latestDoc.data();
    const announcementId = latestDoc.id;
    const lastSeenId = localStorage.getItem("lastAnnouncementId");

    if (announcementId !== lastSeenId) {
      showPopup(latest.title, latest.message);
      localStorage.setItem("lastAnnouncementId", announcementId);
    }
  }
}

// Show popup with cleaner design
function showPopup(title, message) {
  const popup = document.createElement("div");
  popup.className = "announcement-popup";
  popup.innerHTML = `
    <div class="popup-card">
      <h2>${title}</h2>
      <p>${message}</p>
      <button id="closePopup">Got it</button>
    </div>
  `;
  document.body.appendChild(popup);

  document.getElementById("closePopup").addEventListener("click", () => {
    popup.classList.remove("visible");
    setTimeout(() => popup.remove(), 400);
  });

  setTimeout(() => popup.classList.add("visible"), 100);
}

loadAnnouncement();
</script>

  <script>
const wrapper = document.getElementById('iframeWrapper');
const container = document.getElementById('iframeContainer');
const iframe = document.getElementById('myIframe');
const fullscreenBtn = document.getElementById('fullscreenBtn');
const refreshBtn = document.getElementById('refreshBtn');
const openBtn = document.getElementById('openBtn');

// ====== Get Base64 URL from query parameter ======
const params = new URLSearchParams(window.location.search);
const encodedUrl = params.get('b64'); // ?b64=BASE64URL
let iframeUrl = "https://example.com"; // fallback

if (encodedUrl) {
  try {
    iframeUrl = atob(encodedUrl);
  } catch(e) {
    console.warn("Invalid Base64 URL");
  }
}
iframe.src = iframeUrl;

function exitFullscreenSmooth() {
  wrapper.style.transition = 'none';
  container.style.transition = 'none';
  document.exitFullscreen?.() || document.webkitExitFullscreen?.() || document.msExitFullscreen?.();
  wrapper.classList.remove('fullscreen');
  void wrapper.offsetWidth;
  wrapper.style.transition = '';
  container.style.transition = '';
}

fullscreenBtn.addEventListener('click', () => {
  if (!document.fullscreenElement) {
    wrapper.style.transition = 'none';
    container.style.transition = 'none';
    wrapper.requestFullscreen?.() || wrapper.webkitRequestFullscreen?.() || wrapper.msRequestFullscreen?.();
    wrapper.classList.add('fullscreen');
    void wrapper.offsetWidth;
    wrapper.style.transition = '';
    container.style.transition = '';
  } else exitFullscreenSmooth();
});

document.addEventListener('fullscreenchange', () => {
  if (!document.fullscreenElement) exitFullscreenSmooth();
});

refreshBtn.addEventListener('click', () => {
  iframe.src = iframe.src;
});

openBtn.addEventListener('click', () => {
  const newTab = window.open('about:blank', '_blank');
  if (!newTab) return;
  try {
    newTab.document.write(`<iframe src="${iframe.src}" style="width:100vw;height:100vh;border:none;"></iframe>`);
    newTab.document.close();
  } catch (e) {
    newTab.location.href = iframe.src;
  }
});

// Match control color to theme
function updateControlTheme() {
  const color = getComputedStyle(document.documentElement).getPropertyValue('--accent-1').trim() || '#64d2ff';
  document.querySelectorAll('.control-btn').forEach(btn => {
    btn.style.color = color;
    btn.style.boxShadow = `0 0 6px ${color}`;
  });
}
updateControlTheme();
</script>

  
</body>
</html>
